<!DOCTYPE html>
<html>

<head>
  <link rel="apple-touch-startup-image" href="/apple-touch-icon.png">
  <meta name="apple-mobile-web-app-title" content="MqtPi">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="viewport" content="width = 260, initial-scale = 1.2, user-scalable = no">
</head>

<body>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script>
    var HOST = "micropi";
    $(document).ready(function () {
      $("#red_plus").click(function () {
        $('#r').val(function (i, oldval) { return ++oldval; });
        r_changer();
      });
      $("#red_min").click(function () {
        $('#r').val(function (i, oldval) { return --oldval; });
        r_changer();
      });

      $("#green_plus").click(function () {
        $('#g').val(function (i, oldval) { return ++oldval; });
        g_changer();
      });
      $("#green_min").click(function () {
        $('#g').val(function (i, oldval) { return --oldval; });
        g_changer();
      });

      $("#blue_plus").click(function () {
        $('#b').val(function (i, oldval) { return ++oldval; });
        b_changer();
      });
      $("#blue_min").click(function () {
        $('#b').val(function (i, oldval) { return --oldval; });
        b_changer();
      });

      $("#all_plus").click(function () {
        $('#r').val(function (i, oldval) { return ++oldval; });
        $('#g').val(function (i, oldval) { return ++oldval; });
        $('#b').val(function (i, oldval) { return ++oldval; });
        r_changer();
        g_changer();
        b_changer();
      });

      $("#all_min").click(function () {
        $('#r').val(function (i, oldval) { return --oldval; });
        $('#g').val(function (i, oldval) { return --oldval; });
        $('#b').val(function (i, oldval) { return --oldval; });
        r_changer();
        g_changer();
        b_changer();
      });

    });
    function send(send_data, send_value) {
      if (send_data === 'led') {
        $.ajax({
          url: 'http://' + HOST + ':8080/', type: 'GET', data: { led: send_value }, success: function (msg) { }
        });
      }
      if (send_data === 'xmas') {
        $.ajax({
          url: 'http://' + HOST + ':8080/', type: 'GET', data: { xmas: send_value }, success: function (msg) { }
        });
      }
      if (send_data === 'lamp') {
        $.ajax({
          url: 'http://' + HOST + ':8080/', type: 'GET', data: { lamp: send_value }, success: function (msg) { }
        });
      }
      if (send_data === 'amp') {
        $.ajax({
          url: 'http://' + HOST + ':8080/', type: 'GET', data: { amp: send_value }, success: function (msg) { }
        });
      }
      if (send_data === 'R') {
        $.ajax({
          url: 'http://' + HOST + ':8080/', type: 'GET', data: { R: send_value }, success: function (msg) { }
        });
      }
      if (send_data === 'G') {
        $.ajax({
          url: 'http://' + HOST + ':8080/', type: 'GET', data: { G: send_value }, success: function (msg) { }
        });
      }
      if (send_data === 'B') {
        $.ajax({
          url: 'http://' + HOST + ':8080/', type: 'GET', data: { B: send_value }, success: function (msg) { }
        });
      }

    }
  </script>

<fieldset>
  <label for="r">R</label>
  <input type="range" min="0" max="255" id="r" step="1" value="0">
  <output for="r" id="r_out">0</output>
</fieldset>
<button id="red_min" style="width:70px;height:30px">-</button>  <button id="red_plus" style="width:70px;height:30px">+</button>


<fieldset>
  <label for="g">G</label>
  <input type="range" min="0" max="255" id="g" step="1" value="0">
  <output for="g" id="g_out">0</output>
</fieldset>
<button id="green_min" style="width:70px;height:30px">-</button> <button id="green_plus" style="width:70px;height:30px">+</button>

<fieldset>
  <label for="b">B</label>
  <input type="range" min="0" max="255" id="b" step="1" value="0">
  <output for="b" id="b_out">0</output>
</fieldset>
<button id="blue_min" style="width:70px;height:30px">-</button>  <button id="blue_plus" style="width:70px;height:30px">+</button>
<br>
<output id="hex">#000000</output>
<br>
<button id="all_min" style="width:70px;height:30px">-</button><button id="all_plus" style="width:70px;height:30px">+</button>
<br>
<br>

<center>
    <button type="button" onclick="document.location.href='index.html';" style="width:90px">Back</button>
    <br><button type="button" onClick="history.go(0)" style="width:90px">Refresh</button>
  </center>

</body>


<style>
  @import url(https://fonts.googleapis.com/css?family=Roboto:700);
  body {
    /*background-color: rgb(0, 0, 0);*/
    font-family: 'Roboto', sans-serif;
    text-align: center;
    padding: 0 0 0 0;
  }

  fieldset {
    border: none;
  }

  output {
    display: inline-block;
    min-width: 2.5em;
  }

  label,
  output {
    padding: 2px 6px;
    border-radius: 3px;
    font-family: 'Roboto', sans-serif;
    color: #000;
    font-size: 1.1em;
  }

  label[for=r],
  output[for=r] {
    background-color: #f00;
  }

  label[for=g],
  output[for=g] {
    background-color: #0f0;
  }

  label[for=b],
  output[for=b] {
    background-color: #00f;
  }

  #hex {
    min-width: 2em;
    font-size: 2em;
    background: rgba(255, 255, 255, .3);
  }
</style>
<script>
    var body = document.body,
      r = document.querySelector('#r'),
      g = document.querySelector('#g'),
      b = document.querySelector('#b'),
      r_out = document.querySelector('#r_out'),
      g_out = document.querySelector('#g_out'),
      b_out = document.querySelector('#b_out'),
      hex_out = document.querySelector('#hex');

    function setColor() {
      var r_hex = parseInt(r.value, 10).toString(16),
        g_hex = parseInt(g.value, 10).toString(16),
        b_hex = parseInt(b.value, 10).toString(16),
        hex = "#" + pad(r_hex) + pad(g_hex) + pad(b_hex);
      //body.style.backgroundColor = hex;
      hex_out.value = hex;
    }

    function pad(n) {
      return (n.length < 2) ? "0" + n : n;
    }

    function r_changer() {
      setColor();
      send('R', r.value);
      r_out.value = r.value;
    }
    r.addEventListener('change', function () {
      r_changer();
    }, false);

    r.addEventListener('input', function () {
      r_changer();
    }, false);

    function g_changer() {
      setColor();
      send('G', g.value);
      g_out.value = g.value;
    }

    g.addEventListener('change', function () {
      g_changer();
    }, false);

    g.addEventListener('input', function () {
      g_changer();
    }, false);

    function b_changer() {
      setColor();
      send('B', b.value);
      b_out.value = b.value;
    }

    b.addEventListener('change', function () {
      b_changer();
    }, false);

    b.addEventListener('input', function () {
      b_changer();
    }, false);
</script>

</html>